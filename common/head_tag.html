<link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700" rel="stylesheet">

<!-- Пользовательские мета-теги -->
<script>
(function() {
  try {
    var themeSettings = window.require('discourse/lib/theme-settings').getObjectForTheme(settings.theme_id) || {};
    
    // Инжектируем пользовательские мета-теги
    if (themeSettings.enable_custom_meta_tags && themeSettings.custom_meta_tags) {
      var tempContainer = document.createElement('div');
      tempContainer.innerHTML = themeSettings.custom_meta_tags;
      
      var metaTags = tempContainer.querySelectorAll('meta');
      for (var i = 0; i < metaTags.length; i++) {
        document.head.appendChild(metaTags[i].cloneNode(true));
      }
    }
    
    // Инжектируем пользовательский HTML-код
    if (themeSettings.enable_custom_head_code && themeSettings.custom_head_code) {
      var tempContainer = document.createElement('div');
      tempContainer.innerHTML = themeSettings.custom_head_code;
      
      var fragment = document.createDocumentFragment();
      while (tempContainer.firstChild) {
        fragment.appendChild(tempContainer.firstChild);
      }
      
      document.head.appendChild(fragment);
    }
  } catch(e) {
    console.error('Ошибка инжектирования пользовательского кода в head:', e);
  }
})();
</script>

<!-- Тестовый код (можно удалить после отладки) -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  try {
    console.log('Material Design Theme - GIG: Theme settings loaded');
    
    // Для отладки - выводим все доступные настройки темы в консоль
    var themeSettings = window.require('discourse/lib/theme-settings').getObjectForTheme(settings.theme_id);
    console.log('Theme Settings:', themeSettings);
  } catch(e) {
    console.error('Ошибка отладки настроек темы:', e);
  }
});
</script>
